# 通信和信息命令

> **注意：** 在通过通信协议直接通信之前，需要在 M5Stack-basic 上烧录 "Transponder"，并在 Atom 上烧录最新的 atomMain。

| <img src="../resources/3-UserNotes/3.1-SafetyInstructions/danger.png" alt="img-1" width="100" height="100" /> | **请详细阅读接口协议文档，并在测试后继续程序开发。** |
| :------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------- |

## 1 USB 通信设置

**_确保准备好以下设置：_**

- 主线接口：USB Type-C 连接电脑和基本
- 波特率: 115200
- 数据位: 8
- 奇偶校验位: none
- 停止位: 1

## 2 指令帧简介 & 指导

主 PC 通过 M5Stakc-basic 向外围 PC 传输数据。外围 PC 将数据解码为带有返回值的命令，然后在 500 毫秒内将结果发送回主 PC。

## 3 信息命令的发送和接收格式

发送和接收都应以十六进制表示。每条命令应包含 5 个部分，如下所示。第 3 和第 4 部分可以留空。

- 1 命令引脚：0xFE 0xFE
  - 不变
  - 不可或缺
- 2 有效长度:
  - 总长度包括针脚、序列号、功能代码和端点
  - 不可或缺
- 3 序列号：00 ~ 8F
  - 已开发指令的相应数量
  - 可以留空。
- 4 功能代码
  - 以目标为导向
  - 可以留空。
- 5 结束： 0XFA
  - 不变
  - 不可或缺

## 4 命令解释

主 PC 通过 M5Stakc-basic 向外围 PC 传输数据。外围 PC 将数据解码为带有返回值的命令，然后在 500 毫秒内将结果发送回主 PC。

| **类型** | **数据**   | **长度** | **功能**                     |
| :------- | :--------- | :------- | :--------------------------- |
| 指令框架 | 开始位： 0 | 1        | 起始帧识别，0XFE             |
|          | 开始位： 1 | 1        | 起始帧识别，0XFE             |
|          | 位数据长度 | 1        | 不同的命令对应不同的数据长度 |
|          | 指令位     | 1        | 取决于不同的命令             |
| 指令框架 | 数据       | 0-16     | 命令与数据，取决于不同的命令 |
| 结束框架 | 结束位     | 1        | 停止位，0XFA                 |

## 5 单一指令命令说明

### 开机

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X02     |
| Data[3]    | 指令帧     | 0X10     |
| Data[4]    | 结束帧     | 0XFA     |

示例:

端口传输：FE FE 02 10 FA

无返回值

---

### 功率下降和连接中断

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X02     |
| Data[3]    | 指令帧     | 0X11     |
| Data[4]    | 结束帧     | 0XFA     |

示例:

端口传输：FE FE 02 11 FA

无返回值

---

### 检查 Atom 的状态

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X02     |
| Data[3]    | 指令帧     | 0X12     |
| Data[4]    | 结束帧     | 0XFA     |

示例:

端口传输：FE FE 02 12 FA

返回值：数据结构

| **Domain** | **说明**       | **数据**  |
| :--------- | :------------- | :-------- |
| Data[0]    | 返回值：识别帧 | 0XFE      |
| Data[1]    | 返回值：识别帧 | 0XFE      |
| Data[2]    | 返回值：识别帧 | 0X03      |
| Data[3]    | 返回值：命令帧 | 0X12      |
| Data[4]    | 开机/关机      | 0X01/0X00 |
| Data[5]    | 结束帧         | 0XFA      |

示例:

鉴于 Atom 已接通电源：

端口返回：fe fe 03 12 01 fa

---

### 功率下降

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X02     |
| Data[3]    | 命令帧     | 0X13     |
| Data[4]    | 结束帧     | 0XFA     |

示例:

端口传输：FE FE 02 13 FA

无返回值

### 机器人系统检查：正常

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X02     |
| Data[3]    | 命令帧     | 0X14     |
| Data[4]    | 结束帧     | 0XFA     |

示例:

端口传输: FE FE 02 14 FA

返回值：数据结构

| **Domain** | **说明**           | **数据**  |
| :--------- | :----------------- | :-------- |
| Data[0]    | 返回值: 识别帧     | 0XFE      |
| Data[1]    | 返回值: 识别帧     | 0XFE      |
| Data[2]    | 返回值: 数据长度帧 | 0X03      |
| Data[3]    | 返回值: 命令帧     | 0X14      |
| Data[4]    | 连接/连接中断      | 0X01/0X00 |
| Data[5]    | 结束帧             | 0XFA      |

示例:

鉴于 Atom 已成功连接：

端口返回：fe fe fe 03 14 01 fa

---

### 命令更新模式（插值设置/运动模式更新）

| **Domain** | **说明**      | **数据**  |
| :--------- | :------------ | :-------- |
| Data[0]    | 识别帧        | 0XFE      |
| Data[1]    | 识别帧        | 0XFE      |
| Data[2]    | 数据长度帧    | 0X03      |
| Data[3]    | 命令帧        | 0X16      |
| Data[4]    | 连接/连接中断 | 0X01/0X00 |
| Data[5]    | 结束帧        | 0XFA      |

示例:

1. 设置更新运动模式：

   端口传输: FE FE 03 16 01 FA

2. 设置插补运动模式

   端口传输: FE FE 03 16 00 FA

---

### 自由模式（关闭扭力输出）

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X03     |
| Data[3]    | 命令帧     | 0X1A     |
| Data[4]    | 开启/关闭  | 01/00    |
| Data[5]    | 结束帧     | 0XFA     |

示例:

设置自由运动模式

端口传输: FE FE 03 1A 01 FA

### 检查是否设置了自由模式

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X02     |
| Data[3]    | 命令帧     | 0X1B     |
| Data[5]    | 结束帧     | 0XFA     |

示例:

端口返回：FE FE 02 1B FA

返回值: 数据结构

| **Domain** | **说明**           | **数据**  |
| :--------- | :----------------- | :-------- |
| Data[0]    | 返回值: 识别帧     | 0XFE      |
| Data[1]    | 返回值: 识别帧     | 0XFE      |
| Data[2]    | 返回值: 数据长度帧 | 0X03      |
| Data[3]    | 命令帧             | 0X1B      |
| Data[4]    | 开启/关闭          | 0X01/0X00 |
| Data[5]    | 结束帧             | 0XFA      |

示例:

鉴于 Atom 处于自由模式：

端口返回：fe fe 03 1b 01 fa

---

### 读取角度（屏蔽信息）

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X02     |
| Data[3]    | 命令帧     | 0X20     |
| Data[4]    | 结束帧     | 0XFA     |

示例:

端口传输: FE FE 02 20 FA

返回值: 数据结构

| **Domain** | **说明**           | **数据**    |
| :--------- | :----------------- | :---------- |
| Data[0]    | 返回值: 起始帧     | 0XFE        |
| Data[1]    | 返回值: 起始帧     | 0XFE        |
| Data[2]    | 返回值: 数据长度帧 | 0X0E        |
| Data[3]    | 返回值: 命令帧     | 0X20        |
| Data[4]    | 1 号转向器角度过高 | Angle1_high |
| Data[5]    | 1 号转向器角度过低 | Angle1_low  |
| Data[6]    | 2 号转向器角度过高 | Angle2_high |
| Data[7]    | 2 号转向器角度过低 | Angle2_low  |
| Data[8]    | 3 号转向器角度过高 | Angle3_high |
| Data[9]    | 3 号转向器角度过低 | Angle3_low  |
| Data[10]   | 4 号转向器角度过高 | Angle4_high |
| Data[11]   | 4 号转向器角度过低 | Angle4_low  |
| Data[12]   | 5 号转向器角度过高 | Angle5_high |
| Data[13]   | 5 号转向器角度过低 | Angle5_low  |
| Data[14]   | 6 号转向器角度过高 | Angle6_high |
| Data[15]   | 6 号转向器角度过低 | Angle6_low  |
| Data[16]   | 结束帧             | 0XFA        |

示例:

返回值 of port: FE FE 0E 20 00 8C 00 3D FF E6 FF 3F 00 AF FF 51 FA

如何获取关节角度 1：

temp = angle1_low+angle1_high\*256

Angle1=（temp \ 33000 ?(temp – 65536) : temp）/100

_解释：如果 temp 大于 33000，则 temp 减去 65536，然后除以 100；如果 temp 小于 33000，则 temp 直接除以 100。_

_其他关节角度的计算方法与此类似。_

### 发送角

| **Domain** | **说明**     | **数据**   |
| :--------- | :----------- | :--------- |
| Data[0]    | 识别帧       | 0XFE       |
| Data[1]    | 识别帧       | 0XFE       |
| Data[2]    | 数据长度帧   | 0X06       |
| Data[3]    | 命令帧       | 0X21       |
| Data[4]    | 转向器序列号 | joint_no   |
| Data[5]    | 高角度       | angle_high |
| Data[6]    | 低角度       | angle_low  |
| Data[7]    | 指定速度     | sp         |
| Data[8]    | 结束帧       | 0XFA       |

示例:

让 1 号转向器移动到零位

端口传输: FE FE 06 21 01 00 00 14 FA

关节号：1-6

angle_high： byte

计数法：角度值乘以 100 并转换为积分形式，得到十六进制高字节

angle_low: byte

计数法：角度值乘以 100 并转换为积分形式，得到十六进制低字节

无返回值

---

### 发送所有角度

| **Domain** | **说明**           | **数据**    |
| :--------- | :----------------- | :---------- |
| Data[0]    | 识别帧             | 0XFE        |
| Data[1]    | 识别帧             | 0XFE        |
| Data[2]    | 数据长度帧         | 0X0F        |
| Data[3]    | 命令帧             | 0X22        |
| Data[4]    | 1 号转向器角度过高 | Angle1_high |
| Data[5]    | 1 号转向器角度过低 | Angle1_low  |
| Data[6]    | 2 号转向器角度过高 | Angle2_high |
| Data[7]    | 2 号转向器角度过低 | Angle2_low  |
| Data[8]    | 3 号转向器角度过高 | Angle3_high |
| Data[9]    | 3 号转向器角度过低 | Angle3_low  |
| Data[10]   | 4 号转向器角度过高 | Angle4_high |
| Data[11]   | 4 号转向器角度过低 | Angle4_low  |
| Data[12]   | 5 号转向器角度过高 | Angle5_high |
| Data[13]   | 5 号转向器角度过低 | Angle5_low  |
| Data[14]   | 6 号转向器角度过高 | Angle6_high |
| Data[15]   | 6 号转向器角度过低 | Angle6_low  |
| Data[16]   | 指定速度           | Sp          |
| Data[17]   | 结束帧             | 0XFA        |

示例:

向整个关节发送 0 角度，让转向器移动到零位。

端口传输: FE FE 0F 22 00 00 00 00 00 00 00 00 00 00 00 00 1E FA

angle1_high: byte

计数法：角度值乘以 100 并转换为积分形式，得到十六进制高字节

angle1_low: byte

计数法：角度值乘以 100 并转换为积分形式，得到十六进制低字节

_其他角度的计算方法与此类似。_

no 返回值

---

### 读取整个坐标

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X02     |
| Data[3]    | 命令帧     | 0X23     |
| Data[4]    | 结束帧     | 0XFA     |

示例:

端口传输: FE FE 02 23 FA

返回值: 数据结构

| **Domain** | **说明**            | **数据**    |
| :--------- | :------------------ | :---------- |
| Data[0]    | 返回值: 起始帧      | 0XFE        |
| Data[1]    | 返回值: 起始帧      | 0XFE        |
| Data[2]    | 返回值: 数据长度帧  | 0X0E        |
| Data[3]    | 返回值: 命令帧      | 0X23        |
| Data[4]    | 指定 x 坐标的高电平 | x_high      |
| Data[5]    | 指定 x 坐标的低电平 | x_low       |
| Data[6]    | 指定 y 坐标的高电平 | y_high      |
| Data[7]    | 指定 z 坐标的高电平 | z_high      |
| Data[8]    | 指定 z 坐标的低电平 | z_low       |
| Data[9]    | 3 号转向器角度过低  | Angle3_low  |
| Data[10]   | 4 号转向器角度过高  | Angle4_high |
| Data[11]   | 4 号转向器角度过低  | Angle4_low  |
| Data[12]   | 5 号转向器角度过高  | Angle5_high |
| Data[13]   | 5 号转向器角度过低  | Angle5_low  |
| Data[14]   | 6 号转向器角度过高  | Angle6_high |
| Data[15]   | 6 号转向器角度过低  | Angle6_low  |
| Data[16]   | 结束帧              | 0XFA        |

示例:

Port 返回值: FE FE 0E 23 01 BC FD A0 10 15 DC 66 FF 54 DE 21 FA

如何获取 x 坐标：

temp = x_low + x_high\*256

x coordinate =（temp\33000 ?(temp – 65536) : temp)/10

_解释：如果 temp 大于 33000，则 temp 减去 65536，然后除以 100；如果 temp 小于 33000，则 temp 直接除以 100。_

_y 坐标的计算方法类似。_

如何获得 rx 坐标：

temp = rx_low + rx_high\*256

x coordinate =（temp \ 33000 ?(temp – 65536) : temp）/100

_解释：如果 temp 大于 33000，则 temp 减去 65536，然后除以 100；如果 temp 小于 33000，则 temp 直接除以 100。_

_y 坐标的计算方法类似。_

---

### 发送唯一坐标参数

| **Domain** | **说明**                       | **数据**         |
| :--------- | :----------------------------- | :--------------- |
| Data[0]    | 识别帧                         | 0XFE             |
| Data[1]    | 识别帧                         | 0XFE             |
| Data[2]    | 数据长度帧                     | 0X06             |
| Data[3]    | 命令帧                         | 0X24             |
| Data[4]    | 轴线                           | x/y/z/rx/ry/rz   |
| Data[5]    | 指定 xyz/rxryrz 参数的高级状态 | xyz/ rxryrz_high |
| Data[6]    | 指定 xyz/rxryrz 参数的低状态   | xyz/rxryrz_low   |
| Data[7]    | 指定速度                       | Sp               |
| Data[8]    | 结束帧                         | 0XFA             |

示例:

假设 x 坐标为 200，目标速度为 20、

端口传输: FE FE 06 24 01 07 D0 14 FA

指定轴坐标：byte

范围: 1-6

xyz_high 的数据类型：byte

计数法：将 x/y/z 坐标值乘以 100 并转换为积分形式，得到十六进制高字节

xyz_low 的数据类型: byte

计数法：将 x/y/z 坐标值乘以 100 并转换为积分形式，得到十六进制低字节

rxryrz_high 的数据类型: byte

计数法：将 rx/ry/rz 坐标值乘以 100 并转换为积分形式，得到十六进制高字节

rxryrz_low 的数据类型: byte

计数法：将 rx/ry/rz 坐标值乘以 100 并转换为积分形式，得到十六进制低字节

无返回值

---

### 发送整个坐标的参数

| **Domain** | **说明**                 | **数据** |
| :--------- | :----------------------- | :------- |
| Data[0]    | 识别帧                   | 0XFE     |
| Data[1]    | 识别帧                   | 0XFE     |
| Data[2]    | 数据长度帧               | 0X10     |
| Data[3]    | 命令帧                   | 0X25     |
| Data[4]    | 指定 x 坐标的高电平      | x_high   |
| Data[5]    | 指定 x 坐标的低电平      | x_low    |
| Data[6]    | 指定 y 坐标的高电平      | y_high   |
| Data[7]    | 指定 y 坐标的低电平      | y_low    |
| Data[8]    | 指定 z 坐标的高位        | z_high   |
| Data[9]    | 指定 z 坐标的低电平状态  | z_low    |
| Data[10]   | 指定 Rx 坐标的高电平状态 | rx_high  |
| Data[11]   | 指定 Rx 坐标的低电平状态 | rx_low   |
| Data[12]   | 指定 ry 坐标的高状态     | ry_high  |
| Data[13]   | 指定 ry 坐标的低状态     | ry_low   |
| Data[14]   | 指定 rz 坐标的高级状态   | rz_high  |
| Data[15]   | 指定 rz 坐标的低电平状态 | rz_low   |
| Data[16]   | 指定速度                 | Sp       |
| Data[17]   | 模式                     | 0X01     |
| Data[17]   | 结束帧                   | 0XFA     |

示例:

假设机械臂末端的坐标为（150.3，-68.7，101.8，10.18，0，-90），速度为 10、

端口传输: FE FE 10 25 05 DF FD 51 03 FA BC 30 00 00 DC D8 0A 01 FA

x_high 的数据类型: byte

计数法：X 坐标值乘以 10，得到十六进制高字节

x_low 的数据类型: byte

计数法：X 坐标值乘以 10，得到十六进制高字节

_y 坐标的计算方法类似。_

rx_high 的数据类型： byte

计数法：Rx 坐标值乘以 10，得到十六进制高字节

rx_low 的数据类型： byte

计数法：Rx 坐标值乘以 100，得到十六进制高字节

_各坐标的计算方法类似。_

无返回值

---

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X02     |
| Data[3]    | 命令帧     | 0X26     |
| Data[4]    | 结束帧     | 0XFA     |

示例:

端口传输: FE FE 02 26 FA

无返回值

---

### 判断程序是否停止

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X02     |
| Data[3]    | 命令帧     | 0X27     |
| Data[4]    | 结束帧     | 0XFA     |

示例:

端口传输: FE FE 02 27 FA

返回值: 数据结构

| **Domain** | **说明**    | **数据**  |
| :--------- | :---------- | :-------- |
| Data[0]    | 识别帧      | 0XFE      |
| Data[1]    | 识别帧      | 0XFE      |
| Data[2]    | 数据长度帧  | 0X02      |
| Data[3]    | 命令帧      | 0X27      |
| Data[4]    | 暂停/不暂停 | 0X01/0X00 |
| Data[5]    | 结束帧      | 0XFA      |

示例:

鉴于程序暂停

端口返回值: FE FE 03 12 01 FA

---

### 程序恢复

| **Domain** | **说明**    | **数据**  |
| :--------- | :---------- | :-------- |
| Data[0]    | 识别帧      | 0XFE      |
| Data[1]    | 识别帧      | 0XFE      |
| Data[2]    | 数据长度帧  | 0X02      |
| Data[3]    | 命令帧      | 0X27      |
| Data[4]    | 暂停/不暂停 | 0X01/0X00 |
| Data[5]    | 结束帧      | 0XFA      |

示例:

端口传输: FE FE 02 26 FA

无返回值

---

### 程序停止

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X02     |
| Data[3]    | 命令帧     | 0X29     |
| Data[4]    | 结束帧     | 0XFA     |

示例:

端口传输: FE FE 02 26 FA

无返回值

### 是否到达指定坐标

| **Domain** | **说明**                         | **数据**            |
| :--------- | :------------------------------- | :------------------ |
| Data[0]    | 识别帧                           | 0XFE                |
| Data[1]    | 识别帧                           | 0XFE                |
| Data[2]    | 数据长度帧                       | 0X0E/0X0F           |
| Data[3]    | 命令帧                           | 0X2A                |
| Data[4]    | x 坐标高/1 号转向器角度的高字节  | x_high/Angle1_high  |
| Data[5]    | x 坐标低/1 号转向器角度的低字节  | x_low/Angle1_low    |
| Data[6]    | Y 坐标高/2 号转向器角度的高字节  | y_high/Angle2_high  |
| Data[7]    | y 坐标低/2 号转向器角度的低字节  | y_low/Angle2_low    |
| Data[8]    | Y 坐标高/3 号转向器角度的高字节  | z_high/Angle3_high  |
| Data[9]    | z 坐标低/3 号转向器角度的低字节  | z_low/Angle3_low    |
| Data[10]   | Rx 坐标高/4 号转向器角度的高字节 | rx_high/Angle4_high |
| Data[11]   | Rx 坐标低/4 号转向器角度的低字节 | rx_low/Angle4_low   |
| Data[12]   | Ry 坐标高/5 号转向器角度的高字节 | ry_high/Angle5_high |
| Data[13]   | RY 坐标低/5 号转向器角度的低字节 | ry_low/Angle5_low   |
| Data[14]   | RZ 坐标高/6 号转向器角度的高字节 | rz_high/Angle6_high |
| Data[15]   | RZ 坐标低/6 号转向器角度的低字节 | rz_low/Angle6_low   |
| Data[16]   | 坐标/角度                        | 0X01/0X00           |
| Data[17]   | 结束帧                           | 0XFA                |

示例:

判断机械臂是否移动到零位：

端口传输: FE FE 0F 2A 00 00 00 00 00 00 00 00 00 00 00 00 00 FA

x_high 的数据类型： byte

计算方法：X 坐标值乘以 10 并转换为积分形式，得到十六进制高字节

x_low 的数据类型：byte

计算方法：X 坐标值乘以 10 并转换为积分形式，得到十六进制低字节

_y 坐标的计算方法类似。_

rx_high 的数据类型: byte

计算方法：X rx 坐标值乘以 100 并转换为积分形式，得到十六进制高字节

rx_low 的数据类型: byte

计算方法：X rx 坐标值乘以 100 并转换为积分形式，得到十六进制低字节

_各坐标的计算方法类似._

angle_high 的数据类型: byte

计算方法：角度值乘以 100 并转换为积分形式，得到十六进制高字节

angle_low 的数据类型: byte

计算方法：角度值乘以 100 并转换为积分形式，得到十六进制低字节

_类型：字节（暂时不可用）_

返回值: 数据结构

| Domain  | Explanation                               | Data      |
| ------- | ----------------------------------------- | --------- |
| Data[0] | 返回值: head frame                        | 0XFE      |
| Data[1] | 返回值: head frame                        | 0XFE      |
| Data[2] | 返回值: 数据长度帧                        | 0X03      |
| Data[3] | 返回值: 命令帧                            | 0X2a      |
| Data[4] | reaching the point/not reaching the point | 0X01/0X00 |
| Data[5] | 结束帧                                    | 0XFA      |

示例:

鉴于机械臂无法到达该点：

端口返回值: FE FE 03 2A 00 FA

---

### 移动检查

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X02     |
| Data[3]    | 命令帧     | 0X2B     |
| Data[4]    | 结束帧     | 0XFA     |

示例:

端口传输: FE FE 02 2B FA

返回值: 数据结构

| **Domain** | **说明**           | **数据**  |
| :--------- | :----------------- | :-------- |
| Data[0]    | 返回值: head frame | 0XFE      |
| Data[1]    | 返回值: head frame | 0XFE      |
| Data[2]    | 返回值: 数据长度帧 | 0X03      |
| Data[3]    | 返回值: 命令帧     | 0X2B      |
| Data[4]    | 运动/不运动        | 0X01/0X00 |
| Data[5]    | 结束帧             | 0XFA      |

示例:

鉴于程序正在运行：

port 返回值: FE FE 03 2B 01 FA

---

### 点动--以关节为导向的运动

| **Domain** | **说明**     | **数据**  |
| :--------- | :----------- | :-------- |
| Data[0]    | 识别帧       | 0XFE      |
| Data[1]    | 识别帧       | 0XFE      |
| Data[2]    | 数据长度帧   | 0X05      |
| Data[3]    | 命令帧       | 0X30      |
| Data[4]    | 转向器序列号 | Joint     |
| Data[5]    | 转向器方向   | direction |
| Data[6]    | 指定速度     | sp        |
| Data[7]    | 结束帧       | 0XFA      |

示例:

假设 1 号转向器以 20% 的速度顺时针旋转：

port 返回值: FE FE 05 30 01 01 14 FA

关节序号范围： 1-6

di：字节数据类型，0 或 1 均可

sp：字节数据类型，范围为 0 至 100

无返回值.

---

### jod-绝对控制

| **Domain** | **说明**           | **数据**   |
| :--------- | :----------------- | :--------- |
| Data[0]    | 识别帧             | 0XFE       |
| Data[1]    | 识别帧             | 0XFE       |
| Data[2]    | 数据长度帧         | 0X06       |
| Data[3]    | 命令帧             | 0X31       |
| Data[4]    | 转向器序列号       | Joint      |
| Data[5]    | 转向器角度的高字节 | Angle_high |
| Data[6]    | 转向器角度的低字节 | Angle_low  |
| Data[7]    | 指定速度           | sp         |
| Data[8]    | 结束帧             | 0XFA       |

示例:

鉴于 1 号转向器以 20° 的速度移动到 45° 时

端口传输: FE FE 06 31 01 11 94 14 FA

接头编号范围: 1-6

Angle_high 的数据类型: byte

计算方法：Angle_high 的值乘以 100，然后转换为积分形式，得到十六进制高字节

Angle_low 的数据类型: byte

计算方法：Angle_low 的值乘以 100，然后转换为积分形式，得到十六进制低字节

sp: 字节数据类型，范围为 0 至 100

无返回值

### 点动--以协调为导向的运动

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X05     |
| Data[3]    | 命令帧     | 0X32     |
| Data[4]    | 指定坐标   | axis     |
| Data[5]    | 转向器方向 | di       |
| Data[6]    | 指定速度   | sp       |
| Data[7]    | 结束帧     | 0XFA     |

示例:

假设机械臂以 20 的速度向 x 坐标移动

端口传输: FE FE 06 32 01 01 14 FA

轴范围为 1 至 6，分别代表 x、y、z、rx、ry、rz

di: 字节数据类型，0 或 1

sp: 字节数据类型，范围为 0 至 100

无返回值

### 点动步进型号

| **Domain** | **说明**           | **数据**   |
| :--------- | :----------------- | :--------- |
| Data[0]    | 识别帧             | 0XFE       |
| Data[1]    | 识别帧             | 0XFE       |
| Data[2]    | 数据长度帧         | 0X06       |
| Data[3]    | 命令帧             | 0X31       |
| Data[4]    | 转向器序列号       | Joint      |
| Data[5]    | 转向器角度的高字节 | Angle_high |
| Data[6]    | 转向器角度的低字节 | Angle_low  |
| Data[7]    | 指定速度           | sp         |
| Data[8]    | 结束帧             | 0XFA       |

示例:

鉴于 1 号转向器的角度扩大了 45°，旋转速度为 20

端口传输: FE FE 06 33 01 11 94 14 FA

关节序号从 1 到 6 不等

angle_high 的数据类型： byte

计算方法：角度值乘以 100 并转换为积分形式，得到十六进制高字节

angle_low 的数据类型： byte

计算方法：角度值乘以 100 并转换为积分形式，得到十六进制低字节

sp: 字节数据类型，范围为 0 至 100

无返回值

---

### 点动-停止

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X02     |
| Data[3]    | 命令帧     | 0X34     |
| Data[4]    | 结束帧     | 0XFA     |

示例:

停止移动

端口传输: FE FE 02 34 FA

无返回值

---

### 发送电位值

| **Domain** | **说明**     | **数据**     |
| :--------- | :----------- | :----------- |
| Data[0]    | 识别帧       | 0XFE         |
| Data[1]    | 识别帧       | 0XFE         |
| Data[2]    | 数据长度帧   | 0X05         |
| Data[3]    | 命令帧       | 0X3A         |
| Data[4]    | 转向器序列号 | Joint        |
| Data[5]    | 电位值高位   | Encoder_high |
| Data[6]    | 电位值低位   | Encoder_low  |
| Data[7]    | 结束帧       | 0XFA         |

示例:

将 5 号关节设置为 2048 电位

端口传输: FE FE 05 3A 05 08 00 FA

关节序号从 0 到 5

Joint 的数据类型：byte

Encoder_high 的数据类型：byte

计算方法：获取电位值高位（十六进制形式）

Encoder_low 的数据类型：byte

计算方法：获取电位值低位（十六进制形式）

无返回值

---

### 获取电位值

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X03     |
| Data[3]    | 命令帧     | 0X3B     |
| Data[4]    | 关节序号   | joint    |
| Data[5]    | 结束帧     | 0XFA     |

示例:

获取 NO.2 转向器的潜力

serial number of joint ranges from 1 to 6

返回值: 数据结构

| **Domain** | **说明**           | **数据**     |
| :--------- | :----------------- | :----------- |
| Data[0]    | 返回值: 识别帧     | 0XFE         |
| Data[1]    | 返回值: 识别帧     | 0XFE         |
| Data[2]    | 返回值: 数据长度帧 | 0X04         |
| Data[3]    | 返回值: 命令帧     | 0X3B         |
| Data[4]    | 舵机电位值高位     | Encoder_high |
| Data[5]    | 舵机电位值低位     | Encoders_low |
| Data[6]    | 结束帧             | 0XFA         |

示例:

端口传输: FE FE 04 3B 08 07 FA

如何计算电位值：

电位值 = 电位值低位 + 电位值高位 \* 256

---

### 发送六个舵机的电位值

| **Domain** | **说明**           | **数据**       |
| :--------- | :----------------- | :------------- |
| Data[0]    | 识别帧             | 0XFE           |
| Data[1]    | 识别帧             | 0XFE           |
| Data[2]    | 数据长度帧         | 0X0E/0X0F      |
| Data[3]    | 命令帧             | 0X3C           |
| Data[4]    | 1 号转向器的高字节 | encoder_1_high |
| Data[5]    | 1 号转向器的低字节 | encoder_1_low  |
| Data[6]    | 2 号转向器的高字节 | encoder_2_high |
| Data[7]    | 2 号转向器的低字节 | encoder_2_low  |
| Data[8]    | 3 号转向器的高字节 | encoder_3_high |
| Data[9]    | 3 号转向器的低字节 | encoder_3_low  |
| Data[10]   | 4 号转向器的高字节 | encoder_4_high |
| Data[11]   | 4 号转向器的低字节 | encoder_4_low  |
| Data[12]   | 5 号转向器的高字节 | encoder_5_high |
| Data[13]   | 5 号转向器的低字节 | encoder_5_low  |
| Data[14]   | 6 号转向器的高字节 | encoder_6_high |
| Data[15]   | 6 号转向器的低字节 | encoder_6_low  |
| Data[16]   | 指定速度           | Sp             |
| Data[17]   | 结束帧             | 0XFA           |

示例:

发送所有电机的电位值均为 2048，速度为 20

端口传输: FE FE 0F 3C 08 00 08 00 08 00 08 00 08 00 08 00 14 FA

_参考上方发送单独电位值_

encoder_1_high 的数据类型: byte

计算方法：将 1 号转向器的电位转换为积分形式，得到高字节十六进制数

encoder_1_low 的数据类型: byte

计算方法：将 1 号转向器的电位转换为积分形式，得到低字节十六进制数

sp: 字节数据类型，范围为 0 至 100

无返回值

---

| **Domain** | **说明**   | **数据** |
| :--------- | :--------- | :------- |
| Data[0]    | 识别帧     | 0XFE     |
| Data[1]    | 识别帧     | 0XFE     |
| Data[2]    | 数据长度帧 | 0X02     |
| Data[3]    | 命令帧     | 0X3D     |
| Data[4]    | 结束帧     | 0XFA     |

示例:

端口传输: FE FE 02 3D FA

返回值: 数据结构

| Domain   | Explanation                    | Data           |
| -------- | ------------------------------ | -------------- |
| Data[0]  | 识别帧                         | 0XFE           |
| Data[1]  | 识别帧                         | 0XFE           |
| Data[2]  | 数据长度帧                     | 0X0E           |
| Data[3]  | 命令帧                         | 0X3D           |
| Data[4]  | highbyte of No.1 steering gear | encoder_1_high |
| Data[5]  | lowbyte of No.1 steering gear  | encoder_1_low  |
| Data[6]  | highbyte of No.2 steering gear | encoder_2_high |
| Data[7]  | lowbyte of No.2 steering gear  | encoder_2_low  |
| Data[8]  | highbyte of No.3 steering gear | encoder_3_high |
| Data[9]  | lowbyte of No.3 steering gear  | encoder_3_low  |
| Data[10] | highbyte of No.4 steering gear | encoder_4_high |
| Data[11] | lowbyte of No.4 steering gear  | encoder_4_low  |
| Data[12] | highbyte of No.5 steering gear | encoder_5_high |
| Data[13] | lowbyte of No.5 steering gear  | encoder_5_low  |
| Data[14] | highbyte of No.6 steering gear | encoder_6_high |
| Data[15] | lowbyte of No.6 steering gear  | encoder_6_low  |
| Data[17] | 结束帧                         | 0XFA           |

示例:

Given that all robotic arms are set in zero position,

port 返回值: FE FE 0E 3D 08 00 08 00 08 00 08 00 08 00 08 00 FA

How to count potential

How potentials are counted:

potential = low status of potential + high status of potential \* 256

---

### Reading Potential of Six Steering Gears

| Domain  | Explanation | Data |
| ------- | ----------- | ---- |
| Data[0] | 识别帧      | 0XFE |
| Data[1] | 识别帧      | 0XFE |
| Data[2] | 数据长度帧  | 0X02 |
| Data[3] | 命令帧      | 0X3D |
| Data[4] | 结束帧      | 0XFA |

示例:

端口传输: FE FE 02 3D FA

返回值: 数据结构

| Domain   | Explanation                    | Data           |
| -------- | ------------------------------ | -------------- |
| Data[0]  | 识别帧                         | 0XFE           |
| Data[1]  | 识别帧                         | 0XFE           |
| Data[2]  | 数据长度帧                     | 0X0E           |
| Data[3]  | 命令帧                         | 0X3D           |
| Data[4]  | highbyte of No.1 steering gear | encoder_1_high |
| Data[5]  | lowbyte of No.1 steering gear  | encoder_1_low  |
| Data[6]  | highbyte of No.2 steering gear | encoder_2_high |
| Data[7]  | lowbyte of No.2 steering gear  | encoder_2_low  |
| Data[8]  | highbyte of No.3 steering gear | encoder_3_high |
| Data[9]  | lowbyte of No.3 steering gear  | encoder_3_low  |
| Data[10] | highbyte of No.4 steering gear | encoder_4_high |
| Data[11] | lowbyte of No.4 steering gear  | encoder_4_low  |
| Data[12] | highbyte of No.5 steering gear | encoder_5_high |
| Data[13] | lowbyte of No.5 steering gear  | encoder_5_low  |
| Data[14] | highbyte of No.6 steering gear | encoder_6_high |
| Data[15] | lowbyte of No.6 steering gear  | encoder_6_low  |
| Data[17] | 结束帧                         | 0XFA           |

示例:

Given that all robotic arms are set in zero position,

port 返回值: FE FE 0E 3D 08 00 08 00 08 00 08 00 08 00 08 00 FA

How potentials are counted:

potential = low status of potential + high status of potential \* 256

---

### Reading Speed

| Domain  | Explanation | Data |
| ------- | ----------- | ---- |
| Data[0] | 识别帧      | 0XFE |
| Data[1] | 识别帧      | 0XFE |
| Data[2] | 数据长度帧  | 0X02 |
| Data[3] | 命令帧      | 0X40 |
| Data[4] | 结束帧      | 0XFA |

示例:

端口传输: FE FE 02 3D FA

返回值: 数据结构

| Domain  | Explanation     | Data |
| ------- | --------------- | ---- |
| Data[0] | 识别帧          | 0XFE |
| Data[1] | 识别帧          | 0XFE |
| Data[2] | 数据长度帧      | 0X03 |
| Data[3] | 命令帧          | 0X40 |
| Data[4] | specified speed | Sp   |
| Data[5] | 结束帧          | 0XFA |

示例:

Given that the speed is 50%

port 返回值: FE FE 03 40 32 FA

---

### Setting Speed

| Domain  | Explanation     | Data |
| ------- | --------------- | ---- |
| Data[0] | 识别帧          | 0XFE |
| Data[1] | 识别帧          | 0XFE |
| Data[2] | 数据长度帧      | 0X03 |
| Data[3] | 命令帧          | 0X41 |
| Data[4] | specified speed | Sp   |
| Data[5] | 结束帧          | 0XFA |

Sp: data type of byte, ranging from 0 to 100

示例:

Given that the speed is 50%

port 返回值: FE FE 03 41 32 FA

---

### Reading the Smallest Angle

| Domain  | Explanation                    | Data         |
| ------- | ------------------------------ | ------------ |
| Data[0] | 识别帧                         | 0XFE         |
| Data[1] | 识别帧                         | 0XFE         |
| Data[2] | 数据长度帧                     | 0X03         |
| Data[3] | 命令帧                         | 0X4A         |
| Data[4] | serial number of steering gear | Joint_number |
| Data[5] | 结束帧                         | 0XFA         |

示例:

Reading the smallest angle of joint 2

端口传输: FE FE 03 4A 02 FA

serial number of joint ranges from 1 to 6

返回值: 数据结构

| Domain  | Explanation                 | Data         |
| ------- | --------------------------- | ------------ |
| Data[0] | 返回值: 识别帧              | 0XFE         |
| Data[1] | 返回值: 识别帧              | 0XFE         |
| Data[2] | 返回值: 数据长度帧          | 0X04         |
| Data[3] | 返回值: 命令帧              | 0X4A         |
| Data[4] | serial number of joint      | Joint_number |
| Data[5] | high angle of steering gear | Angle_high   |
| Data[6] | low angle of steering gear  | Angle_low    |
| Data[7] | 结束帧                      | 0XFA         |

示例:

port 返回值: FE FE 05 4A 02 F9 F2 FA

How smallest angles are counted:

temp = angle1_low+angle1_high\*256

Angle1=（temp \ 33000 ?(temp – 65536) : temp）/10

_Explanation: if temp is greater than 33000, temp minus 65536, and then is divided by 10; if temp is less than 33000, then temp is divided by 10 directly._

---

### Reading the Smallest Angle

| Domain  | Explanation                    | Data         |
| ------- | ------------------------------ | ------------ |
| Data[0] | 识别帧                         | 0XFE         |
| Data[1] | 识别帧                         | 0XFE         |
| Data[2] | 数据长度帧                     | 0X03         |
| Data[3] | 命令帧                         | 0X4A         |
| Data[4] | serial number of steering gear | Joint_number |
| Data[5] | 结束帧                         | 0XFA         |

Serial number of joint ranges from 1 to 6

示例:

Reading the largest angle of joint 2

端口传输: FE FE 03 4B 02 FA

返回值: 数据结构

| Domain  | Explanation                 | Data         |
| ------- | --------------------------- | ------------ |
| Data[0] | 返回值: 识别帧              | 0XFE         |
| Data[1] | 返回值: 识别帧              | 0XFE         |
| Data[2] | 返回值: 数据长度帧          | 0X04         |
| Data[3] | 返回值: 命令帧              | 0X4B         |
| Data[4] | serial number of joint      | Joint_number |
| Data[5] | high angle of steering gear | Angle_high   |
| Data[6] | low angle of steering gear  | Angle_low    |
| Data[7] | 结束帧                      | 0XFA         |

示例:

port 返回值: FE FE 05 4B 02 06 72 FA

How the largest angles are counted:

temp = angle1_low+angle1_high\*256

Angle1=（temp \ 33000 ?(temp – 65536) : temp）/10

_Explanation: if temp is greater than 33000, temp minus 65536, and then is divided by 10; if temp is less than 33000, then temp is divided by 10 directly._

---

### Setting the Smallest Angle

| Domain  | Explanation                 | Data         |
| ------- | --------------------------- | ------------ |
| Data[0] | 返回值: 识别帧              | 0XFE         |
| Data[1] | 返回值: 识别帧              | 0XFE         |
| Data[2] | 返回值: 数据长度帧          | 0X05         |
| Data[3] | 返回值: 命令帧              | 0X4C         |
| Data[4] | serial number of joint      | Joint_number |
| Data[5] | high angle of steering gear | Angle_high   |
| Data[6] | low angle of steering gear  | Angle_low    |
| Data[7] | 结束帧                      | 0XFA         |

示例:

Given that the smallest angle of joint 2 is 0

Serial number of joint ranges from 1 to 6

port 返回值: FE FE 03 41 32 FA

data type of angle1_high: byte

counting method: angleis multiplied by 100 and converted into integral form to get the hexadecimal highbyte

data type of angle1_low: byte

counting method: angleis multiplied by 100 and converted into integral form to get the hexadecimal lowbyte

端口传输: FE FE 05 4C 02 00 00 FA

no 返回值

---

### Setting the Largest Angle

| Domain  | Explanation               | Data         |
| ------- | ------------------------- | ------------ |
| Data[0] | 识别帧                    | 0XFE         |
| Data[1] | 识别帧                    | 0XFE         |
| Data[2] | 数据长度帧                | 0X05         |
| Data[3] | 命令帧                    | 0X4D         |
| Data[4] | serial number of joint    | Joint_number |
| Data[5] | highbyte of steering gear | Angle_high   |
| Data[6] | lowbyte of steering gear  | Angle_low    |
| Data[7] | 结束帧                    | 0XFA         |

示例:

Given that the largest angle of joint 2 is 45

Serial number of joint ranges from 1 to 6

port 返回值: FE FE 03 41 32 FA

data type of angle1_high: byte

counting method: angleis multiplied by 100 and converted into integral form to get the hexadecimal highbyte

data type of angle1_low: byte

counting method: angleis multiplied by 100 and converted into integral form to get the hexadecimal lowbyte

端口传输: FE FE 05 4C 02 11 94 FA

no 返回值

---

### Checking Connection

| Domain  | Explanation                    | Data         |
| ------- | ------------------------------ | ------------ |
| Data[0] | 识别帧                         | 0XFE         |
| Data[1] | 识别帧                         | 0XFE         |
| Data[2] | 数据长度帧                     | 0X03         |
| Data[3] | 命令帧                         | 0X50         |
| Data[4] | serial number of steering gear | Joint_number |
| Data[5] | 结束帧                         | 0XFA         |

Serial number of joint ranges from 1 to 6

示例:

Checking whether No.1 steering gear is connected

端口传输: FE FE 03 50 01 FA

返回值: 数据结构

| Domain  | Explanation             | Data         |
| ------- | ----------------------- | ------------ |
| Data[0] | 返回值: 识别帧          | 0XFE         |
| Data[1] | 返回值: 识别帧          | 0XFE         |
| Data[2] | 返回值: 数据长度帧      | 0X03         |
| Data[3] | 命令帧                  | 0X50         |
| Data[4] | serial number of joint  | Joint_number |
| Data[5] | connected/not connected | 0X01/0X00    |
| Data[6] | 结束帧                  | 0XFA         |

示例:

No.1 steering gear is connected

Port 返回值: FE FE 04 50 01 01 FA

### Checking Whether All Steering Gears Are Powered On

| Domain  | Explanation | Data |
| ------- | ----------- | ---- |
| Data[0] | 识别帧      | 0XFE |
| Data[1] | 识别帧      | 0XFE |
| Data[2] | 数据长度帧  | 0X02 |
| Data[3] | 命令帧      | 0X51 |
| Data[5] | 结束帧      | 0XFA |

示例:

端口传输: FE FE 02 51 FA

返回值: 数据结构

| Domain  | Explanation        | Data      |
| ------- | ------------------ | --------- |
| Data[0] | 返回值: 识别帧     | 0XFE      |
| Data[1] | 返回值: 识别帧     | 0XFE      |
| Data[2] | 返回值: 数据长度帧 | 0X03      |
| Data[3] | 返回值: 命令帧     | 0X51      |
| Data[4] | power on/off       | 0X01/0X00 |
| Data[5] | 结束帧             | 0XFA      |

示例:

Not all steering gears are powered on

端口传输: FE FE 03 51 01 FA

---

### Reading Servo Parameters

| Domain  | Explanation            | Data         |
| ------- | ---------------------- | ------------ |
| Data[0] | 识别帧                 | 0XFE         |
| Data[1] | 识别帧                 | 0XFE         |
| Data[2] | 数据长度帧             | 0X04         |
| Data[3] | 命令帧                 | 0X53         |
| Data[4] | serial number of joint | Joint_number |
| Data[5] | data address           | data_id      |
| Data[6] | 结束帧                 | 0XFA         |

示例:

Reading ratio parameter of P position of No.1 steering gear

端口传输: FE FE 03 51 01 FA

Serial number of joint ranges from 1 to 6

Data_id: data type byte, referring to the chart below for specific value:

| Address | Function               | Range  | Initial Value | Explanation                                           |
| ------- | ---------------------- | ------ | ------------- | ----------------------------------------------------- |
| 20      | LED siren              | 0-254  | 0             | 1\0: turn on/off LED siren                            |
| 21      | position loop P        | 0-254  | 10            | control the ratio coefficient                         |
| 22      | position loop I        | 0-254  | 0             | control the differential coefficient                  |
| 23      | position loop D        | 0-254  | 1             | control the integral-action coefficient               |
| 24      | minimum starting force | 0-1000 | 0             | set the smallest torque output capability 1000 = 100% |

返回值: 数据结构

| Domain  | Explanation        | Data |
| ------- | ------------------ | ---- |
| Data[0] | 返回值: 识别帧     | 0XFE |
| Data[1] | 返回值: 识别帧     | 0XFE |
| Data[2] | 返回值: 数据长度帧 | 0X03 |
| Data[3] | 返回值: 命令帧     | 0X53 |
| Data[4] | 返回值: data       | data |
| Data[5] | 结束帧             | 0XFA |

### Setting Servo Parameters

| Domain  | Explanation            | Data     |
| ------- | ---------------------- | -------- |
| Data[0] | 识别帧                 | 0XFE     |
| Data[1] | 识别帧                 | 0XFE     |
| Data[2] | 数据长度帧             | 0X05     |
| Data[3] | 命令帧                 | 0X52     |
| Data[4] | serial number of joint | Joint_no |
| Data[5] | data address           | data_id  |
| Data[6] | 结束帧                 | 0XFA     |

示例:

Reading ratio parameter of P position of No.1 steering gear

端口传输: FE FE 05 52 01 15 01 FA

Serial number of joint ranges from 1 to 6

no 返回值

Data_id: data type byte, referring to the chart below for specific value:

| Address | Function               | Range  | Initial Value | Explanation                                           |
| ------- | ---------------------- | ------ | ------------- | ----------------------------------------------------- |
| 20      | LED siren              | 0-254  | 0             | 1\0: turn on/off LED siren                            |
| 21      | position loop P        | 0-254  | 10            | control the ratio coefficient                         |
| 22      | position loop I        | 0-254  | 0             | control the differential coefficient                  |
| 23      | position loop D        | 0-254  | 1             | control the integral-action coefficient               |
| 24      | minimum starting force | 0-1000 | 0             | set the smallest torque output capability 1000 = 100% |

---

### Setting Zero Position of Steering Gear

| Domain  | Explanation            | Data     |
| ------- | ---------------------- | -------- |
| Data[0] | 识别帧                 | 0XFE     |
| Data[1] | 识别帧                 | 0XFE     |
| Data[2] | 数据长度帧             | 0X03     |
| Data[3] | 命令帧                 | 0X54     |
| Data[4] | serial number of joint | Joint_no |
| Data[6] | 结束帧                 | 0XFA     |

示例:

Reading zero position of No.1 steering gear

端口传输: FE FE 03 54 01 FA

Serial number of joint ranges from 1 to 6

no 返回值

---

### Braking Single Motor

| Domain  | Explanation            | Data     |
| ------- | ---------------------- | -------- |
| Data[0] | 识别帧                 | 0XFE     |
| Data[1] | 识别帧                 | 0XFE     |
| Data[2] | 数据长度帧             | 0X02     |
| Data[3] | 命令帧                 | 0X55     |
| Data[4] | serial number of joint | Joint_no |
| Data[5] | 结束帧                 | 0XFA     |

示例:

Serial number of joint ranges from 1 to 6

Braking No.1 steering gear,

端口传输: FE FE 03 55 01 FA

no 返回值

---

### Power Failure of Single Motor

| Domain  | Explanation                    | Data     |
| ------- | ------------------------------ | -------- |
| Data[0] | 识别帧                         | 0XFE     |
| Data[1] | 识别帧                         | 0XFE     |
| Data[2] | 数据长度帧                     | 0X03     |
| Data[3] | 命令帧                         | 0X56     |
| Data[4] | serial number of steering gear | Servo_no |
| Data[5] | 结束帧                         | 0XFA     |

示例:

Let No.3 steering gear reducing power

Serial number of servo ranges from 1 to 6

no 返回值

---

### Powering On a Single Motor

| Domain  | Explanation                    | Data     |
| ------- | ------------------------------ | -------- |
| Data[0] | 识别帧                         | 0XFE     |
| Data[1] | 识别帧                         | 0XFE     |
| Data[2] | 数据长度帧                     | 0X03     |
| Data[3] | 命令帧                         | 0X57     |
| Data[4] | serial number of steering gear | Servo_no |
| Data[5] | 结束帧                         | 0XFA     |

示例:

power on No.1 steering gear

端口传输: FE FE 03 57 01 FA

Serial number of servo ranges from 1 to 6

no 返回值

---

### Setting Mode of Atom

| Domain  | Explanation          | Data        |
| ------- | -------------------- | ----------- |
| Data[0] | 识别帧               | 0XFE        |
| Data[1] | 识别帧               | 0XFE        |
| Data[2] | 数据长度帧           | 0X04        |
| Data[3] | 命令帧               | 0X60        |
| Data[4] | serial number of pin | pin_no      |
| Data[5] | input/output         | 00X00/00X01 |
| Data[6] | 结束帧               | 0XFA        |

示例:

setting atom pin22 as input mode

端口传输: FE FE 04 60 16 00 FA

Pin_no: data type byte

Pin_mode：0/1

no 返回值

---

### Setting Atom IO (setDigitalOutput)

| Domain  | Explanation                | Data        |
| ------- | -------------------------- | ----------- |
| Data[0] | 识别帧                     | 0XFE        |
| Data[1] | 识别帧                     | 0XFE        |
| Data[2] | 数据长度帧                 | 0X04        |
| Data[3] | 命令帧                     | 0X61        |
| Data[4] | serial number of pin       | pin_no      |
| Data[5] | signal of electrical level | 00X00/00X01 |
| Data[6] | 结束帧                     | 0XFA        |

示例:

setting atom pin23 as high electrical level

端口传输: FE FE 04 61 17 01 FA

no 返回值

---

### Reading Atom IO(getDigitalInput)

| Domain  | Explanation          | Data   |
| ------- | -------------------- | ------ |
| Data[0] | 识别帧               | 0XFE   |
| Data[1] | 识别帧               | 0XFE   |
| Data[2] | 数据长度帧           | 0X04   |
| Data[3] | 命令帧               | 0X61   |
| Data[4] | serial number of pin | pin_no |
| Data[5] | 结束帧               | 0XFA   |

示例:

reading signal of electrical level of pin23

端口传输: FE FE 03 62 16 FA

返回值: 数据结构

| Domain  | Explanation                | Data      |
| ------- | -------------------------- | --------- |
| Data[0] | 返回值: 识别帧             | 0XFE      |
| Data[1] | 返回值: 识别帧             | 0XFE      |
| Data[2] | 返回值: 数据长度帧         | 0X03      |
| Data[3] | 返回值: 命令帧             | 0X53      |
| Data[4] | pin number                 | pin_no    |
| Data[5] | signal of electrical level | 0X00/0X01 |
| Data[6] | 结束帧                     | 0XFA      |

示例:

Given that pin 22 is of high electrical level

Port 返回值: FE FE 04 62 16 01 FA

---

### Reading the Angle of Gripper

| Domain  | Explanation | Data |
| ------- | ----------- | ---- |
| Data[0] | 识别帧      | 0XFE |
| Data[1] | 识别帧      | 0XFE |
| Data[2] | 数据长度帧  | 0X02 |
| Data[3] | 命令帧      | 0X65 |
| Data[4] | 结束帧      | 0XFA |

示例:

端口传输: FE FE 02 65 FA

返回值: 数据结构

| Domain  | Explanation               | Data  |
| ------- | ------------------------- | ----- |
| Data[0] | 返回值: 识别帧            | 0XFE  |
| Data[1] | 返回值: 识别帧            | 0XFE  |
| Data[2] | 返回值: 数据长度帧        | 0X03  |
| Data[3] | 返回值: 命令帧            | 0X65  |
| Data[4] | span of gripper's opening | value |
| Data[5] | 结束帧                    | 0XFA  |

value：0-100%

示例:

Given that gripper is completely opening

Port 返回值: FE FE 03 65 64 FA

value: 6 \* 16 + 4 = 100

---

### Setting the Mode of Gripper

| Domain  | Explanation             | Data      |
| ------- | ----------------------- | --------- |
| Data[0] | 识别帧                  | 0XFE      |
| Data[1] | 识别帧                  | 0XFE      |
| Data[2] | 数据长度帧              | 0X04      |
| Data[3] | 命令帧                  | 0X66      |
| Data[4] | gripper opening/closing | 0X00/0X01 |
| Data[5] | speed                   | Sp        |
| Data[6] | 结束帧                  | 0XFA      |

示例:

making gripper open at the speed of 50

端口传输: FE FE 04 66 00 32 FA

no 返回值

---

### Setting Angles of Gripper

| Domain  | Explanation                       | Data  |
| ------- | --------------------------------- | ----- |
| Data[0] | 识别帧                            | 0XFE  |
| Data[1] | 识别帧                            | 0XFE  |
| Data[2] | 数据长度帧                        | 0X04  |
| Data[3] | 命令帧                            | 0X67  |
| Data[4] | span of gripper's opening/closing | value |
| Data[5] | speed                             | Sp    |
| Data[6] | 结束帧                            | 0XFA  |

示例:

Given that gripper opens by 50% at the speed of 30

端口传输: FE FE 04 67 32 14 FA

The value can be converted into hexadecimal

no 返回值

---

### Setting the Gripper to Zero Position

| Domain  | Explanation | Data |
| ------- | ----------- | ---- |
| Data[0] | 识别帧      | 0XFE |
| Data[1] | 识别帧      | 0XFE |
| Data[2] | 数据长度帧  | 0X02 |
| Data[3] | 命令帧      | 0X68 |
| Data[4] | 结束帧      | 0XFA |

示例:

Setting the Gripper to Zero Position

端口传输: FE FE 02 68 FA

### Checking Whether the Gripper is Moving

| Domain  | Explanation | Data |
| ------- | ----------- | ---- |
| Data[0] | 识别帧      | 0XFE |
| Data[1] | 识别帧      | 0XFE |
| Data[2] | 数据长度帧  | 0X02 |
| Data[3] | 命令帧      | 0X69 |
| Data[4] | 结束帧      | 0XFA |

端口传输: FE FE 02 69 FA

返回值: 数据结构

| Domain  | Explanation | Data  |
| ------- | ----------- | ----- |
| Data[0] | 识别帧      | 0XFE  |
| Data[1] | 识别帧      | 0XFE  |
| Data[2] | 数据长度帧  | 0X04  |
| Data[3] | 命令帧      | 0X69  |
| Data[4] | stop/move   | 00/01 |
| Data[6] | 结束帧      | 0XFA  |

Given that gripper stops working

端口传输: FE FE 03 69 00 FA

---

### Setting RGB of Atom

| Domain  | Explanation | Data      |
| ------- | ----------- | --------- |
| Data[0] | 识别帧      | 0XFE      |
| Data[1] | 识别帧      | 0XFE      |
| Data[2] | 数据长度帧  | 0X05      |
| Data[3] | 命令帧      | 0X6A      |
| Data[4] | R           | 0X00/0XFF |
| Data[5] | G           | 0X00/0XFF |
| Data[6] | B           | 0X00/0XFF |
| Data[7] | 结束帧      | 0XFA      |

示例:

Setting RGB color as blue

端口传输: FE FE 05 6A 00 00 FF FA

no 返回值

---

### Setting IO Output

| Domain  | Explanation                | Data      |
| ------- | -------------------------- | --------- |
| Data[0] | 识别帧                     | 0XFE      |
| Data[1] | 识别帧                     | 0XFE      |
| Data[2] | 数据长度帧                 | 0X04      |
| Data[3] | 命令帧                     | 0Xa0      |
| Data[4] | pin number                 | Pin_no    |
| Data[5] | signal of electrical level | 0X00/0X01 |
| Data[4] | 结束帧                     | 0XFA      |

示例:

Setting high electrical level of pin 2

端口传输: FE FE 02 a0 02 01 FA

---

### Reading IO Output

| Domain  | Explanation | Data   |
| ------- | ----------- | ------ |
| Data[0] | 识别帧      | 0XFE   |
| Data[1] | 识别帧      | 0XFE   |
| Data[2] | 数据长度帧  | 0X03   |
| Data[3] | 命令帧      | 0Xa1   |
| Data[4] | pin number  | Pin_no |
| Data[4] | 结束帧      | 0XFA   |

端口传输: FE FE 02 a0 02 01 FA

返回值: 数据结构

| Domain  | Explanation                | Data      |
| ------- | -------------------------- | --------- |
| Data[0] | 返回值: 识别帧             | 0XFE      |
| Data[1] | 返回值: 识别帧             | 0XFE      |
| Data[2] | 返回值: 数据长度帧         | 0X04      |
| Data[3] | 返回值: 命令帧             | 0Xa1      |
| Data[4] | pin number                 | Pin_no    |
| Data[5] | signal of electrical level | 0X00/0X01 |
| Data[6] | 结束帧                     | 0XFA      |

示例:

Given that pin 2 has high electrical level

Port 返回值: FE FE 04 a1 02 01 FA

---

### Acquirng WiFi Account & Password

| Domain  | Explanation | Data |
| ------- | ----------- | ---- |
| Data[0] | 识别帧      | 0XFE |
| Data[1] | 识别帧      | 0XFE |
| Data[2] | 数据长度帧  | 0X02 |
| Data[3] | 命令帧      | 0Xb1 |
| Data[4] | 结束帧      | 0XFA |

示例:

端口传输: FE FE 02 b1 FA

port 返回值: ssid: MyCobotWiFi2.4G password: mycobot123

ssid: WiFi account

password: WiFi password

---

### Setting Port Number

| Domain  | Explanation      | Data      |
| ------- | ---------------- | --------- |
| Data[0] | 识别帧           | 0XFE      |
| Data[1] | 识别帧           | 0XFE      |
| Data[2] | 数据长度帧       | 0X04      |
| Data[3] | 命令帧           | 0Xb2      |
| Data[4] | highbyte of port | port_high |
| Data[5] | lowbyte of port  | port_low  |
| Data[6] | 结束帧           | 0XFA      |

示例:

Given that port number is 7000

端口传输: FE FE 04 b2 1b 58 FA

port_high: highbyte of hexadecimal port number

port_low: lowbyte of hexadecimal port number

No 返回值

---

### Setting Tool Coordinate

| Domain   | Explanation                          | Data    |
| -------- | ------------------------------------ | ------- |
| Data[0]  | 识别帧                               | 0XFE    |
| Data[1]  | 识别帧                               | 0XFE    |
| Data[2]  | 数据长度帧                           | 0X0E    |
| Data[3]  | 命令帧                               | 0X81    |
| Data[4]  | specify high status of x coordinate  | x_high  |
| Data[5]  | specify low status of x coordinate   | x_low   |
| Data[6]  | specify high status of y coordinate  | y_high  |
| Data[7]  | specify low status of y coordinate   | y_low   |
| Data[8]  | specify high status of z coordinate  | z_high  |
| Data[9]  | specify low status of z coordinate   | z_low   |
| Data[10] | specify high status of rx coordinate | rx_high |
| Data[11] | specify low status of rx coordinate  | rx_low  |
| Data[12] | specify high status of ry coordinate | ry_high |
| Data[13] | specify low status of ry coordinate  | ry_low  |
| Data[14] | specify high status of rz coordinate | rz_high |
| Data[15] | specify low status of rz coordinate  | rz_low  |
| Data[16] | 结束帧                               | 0XFA    |

示例:

Given that （0，0，50，0，0，0）is tool coordinate,

端口传输: FE FE 0E 81 00 00 00 00 13 88 00 00 00 00 00 00 FA

no 返回值

---

### Acquiring Tool Coordinate

| Domain  | Explanation | Data |
| ------- | ----------- | ---- |
| Data[0] | 识别帧      | 0XFE |
| Data[1] | 识别帧      | 0XFE |
| Data[2] | 数据长度帧  | 0X02 |
| Data[3] | 命令帧      | 0X82 |
| Data[4] | 结束帧      | 0XFA |

示例:

端口传输: FE FE 04 b2 1b 58 FA

返回值: 数据结构

| Domain   | Explanation                          | Data    |
| -------- | ------------------------------------ | ------- |
| Data[0]  | 识别帧                               | 0XFE    |
| Data[1]  | 识别帧                               | 0XFE    |
| Data[2]  | 数据长度帧                           | 0X0E    |
| Data[3]  | 命令帧                               | 0X81    |
| Data[4]  | specify high status of x coordinate  | x_high  |
| Data[5]  | specify low status of x coordinate   | x_low   |
| Data[6]  | specify high status of y coordinate  | y_high  |
| Data[7]  | specify low status of y coordinate   | y_low   |
| Data[8]  | specify high status of z coordinate  | z_high  |
| Data[9]  | specify low status of z coordinate   | z_low   |
| Data[10] | specify high status of rx coordinate | rx_high |
| Data[11] | specify low status of rx coordinate  | rx_low  |
| Data[12] | specify high status of ry coordinate | ry_high |
| Data[13] | specify low status of ry coordinate  | ry_low  |
| Data[14] | specify high status of rz coordinate | rz_high |
| Data[15] | specify low status of rz coordinate  | rz_low  |
| Data[16] | 结束帧                               | 0XFA    |

Port 返回值: FE FE 0E 82 00 00 00 00 13 88 00 00 00 00 00 00 FA

How to get x coordinate:

temp = x_low + x_high\*256

x coordinate =（temp\33000 ?(temp – 65536) : temp)/10

_Explanation: if temp is greater than 33000, temp minus 65536, and then is divided by 100; if temp is less than 33000, then temp is divided by 100 directly._

_y coordinate is counted in a similar way._

How to get rx coordinate:

temp = rx_low + rx_high\*256

x coordinate =（temp \ 33000 ?(temp – 65536) : temp）/100

_Explanation: if temp is greater than 33000, temp minus 65536, and then is divided by 100; if temp is less than 33000, then temp is divided by 100 directly._

_ry coordinate is counted in a similar way._

---

### Setting World Coordinate

| Domain   | Explanation                          | Data    |
| -------- | ------------------------------------ | ------- |
| Data[0]  | 识别帧                               | 0XFE    |
| Data[1]  | 识别帧                               | 0XFE    |
| Data[2]  | 数据长度帧                           | 0X0E    |
| Data[3]  | 命令帧                               | 0X81    |
| Data[4]  | specify high status of x coordinate  | x_high  |
| Data[5]  | specify low status of x coordinate   | x_low   |
| Data[6]  | specify high status of y coordinate  | y_high  |
| Data[7]  | specify low status of y coordinate   | y_low   |
| Data[8]  | specify high status of z coordinate  | z_high  |
| Data[9]  | specify low status of z coordinate   | z_low   |
| Data[10] | specify high status of rx coordinate | rx_high |
| Data[11] | specify low status of rx coordinate  | rx_low  |
| Data[12] | specify high status of ry coordinate | ry_high |
| Data[13] | specify low status of ry coordinate  | ry_low  |
| Data[14] | specify high status of rz coordinate | rz_high |
| Data[15] | specify low status of rz coordinate  | rz_low  |
| Data[16] | 结束帧                               | 0XFA    |

Port 返回值: FE FE 0E 84 00 00 00 00 13 88 00 00 00 00 00 00 FA

How to get x coordinate:

temp = x_low + x_high\*256

x coordinate =（temp\33000 ?(temp – 65536) : temp)/10

_Explanation: if temp is greater than 33000, temp minus 65536, and then is divided by 100; if temp is less than 33000, then temp is divided by 100 directly._

_y coordinate is counted in a similar way._

How to get rx coordinate:

temp = rx_low + rx_high\*256

x coordinate =（temp \ 33000 ?(temp – 65536) : temp）/100

_Explanation: if temp is greater than 33000, temp minus 65536, and then is divided by 100; if temp is less than 33000, then temp is divided by 100 directly._

_ry coordinate is counted in a similar way._

---

### Setting Base Coordinate

| Domain  | Explanation                      | Data  |
| ------- | -------------------------------- | ----- |
| Data[0] | 识别帧                           | 0XFE  |
| Data[1] | 识别帧                           | 0XFE  |
| Data[2] | 数据长度帧                       | 0X03  |
| Data[3] | 命令帧                           | 0X85  |
| Data[4] | base coordinate/world coordiante | 00/01 |
| Data[5] | 结束帧                           | 0XFA  |

示例:

Given that the coordinate should be set as world coordinate

端口传输: FE FE 03 85 01 FA

no 返回值

---

### Acquiring Base Coordinate

| Domain  | Explanation | Data |
| ------- | ----------- | ---- |
| Data[0] | 识别帧      | 0XFE |
| Data[1] | 识别帧      | 0XFE |
| Data[2] | 数据长度帧  | 0X02 |
| Data[3] | 命令帧      | 0X86 |
| Data[4] | 结束帧      | 0XFA |

示例:

端口传输: FE FE 02 86 FA

返回值: 数据结构

| Domain  | Explanation                      | Data  |
| ------- | -------------------------------- | ----- |
| Data[0] | 返回值: 识别帧                   | 0XFE  |
| Data[1] | 返回值: 识别帧                   | 0XFE  |
| Data[2] | 返回值: 数据长度帧               | 0X03  |
| Data[3] | 返回值: 命令帧                   | 0X86  |
| Data[4] | base coordinate/world coordiante | 00/01 |
| Data[5] | 结束帧                           | 0XFA  |

示例:

端口传输: FE FE 03 86 01 FA

---

### Setting End Coordinate

| Domain  | Explanation | Data  |
| ------- | ----------- | ----- |
| Data[0] | 识别帧      | 0XFE  |
| Data[1] | 识别帧      | 0XFE  |
| Data[2] | 数据长度帧  | 0X03  |
| Data[3] | 命令帧      | 0X89  |
| Data[4] | flange      | 00/01 |
| Data[5] | 结束帧      | 0XFA  |

示例:

Given that end coordinate are set as tool

端口传输: FE FE 03 89 01 FA

no 返回值

---

### Acquiring End Coordinate

| Domain  | Explanation | Data |
| ------- | ----------- | ---- |
| Data[0] | 识别帧      | 0XFE |
| Data[1] | 识别帧      | 0XFE |
| Data[2] | 数据长度帧  | 0X02 |
| Data[3] | 命令帧      | 0X8a |
| Data[4] | 结束帧      | 0XFA |

示例:

端口传输: FE FE 02 8a FA

返回值: 数据结构

| Domain  | Explanation | Data  |
| ------- | ----------- | ----- |
| Data[0] | 识别帧      | 0XFE  |
| Data[1] | 识别帧      | 0XFE  |
| Data[2] | 数据长度帧  | 0X03  |
| Data[3] | 命令帧      | 0X8a  |
| Data[4] | flange      | 00/01 |
| Data[5] | 结束帧      | 0XFA  |

示例:

port 返回值: FE FE 03 86 01 FA

## Appendix

The specific method of adding coordinate-exchanging programs from Atom repository and sports repository are listed as following.

1. Change end coordinate.

2. Set end coordinate by setEndType and getEndType.

   _FLANGE: Setting EndType as FLANG; TOOL: Setting EndType as TOOL End._

3. Read tool coordinate via setToolReference and getToolReference. (FLANGE serves as relative coordinate and information about tool end is relevant to FLANGE coordinate.)

4. After setting EndType as FLANGE, GetCoords and WriteCoords are counted depending on FLANG's position.

5. After setting EndType as TOOL, GetCoords and WriteCoords are counted depending on end's position.

6. Change base coordinate.

7. Set base coordinate by setReferenceFrame.

   _RFType: Base means setting robotic pedestal as base coordinate; RFType:WORLD means make world coordinate as base coordinate; getReferenceFrame serves to read the type of base coordinate._

8. setWorldReference and getWorldReference works to read information about base coordinate. World coordinate serves as relative coordinate to type pedestal information of robots that is relevant to world coordinate.
9. If base coordinate acts as pedestal, GetCoords and WriteCoords take base coordinate as reference coordinate.
10. If world coordinate acts as pedestal, GetCoords and WriteCoords take world coordinate as reference coordinate.

### Information Updating About Communication

These are newly-added functions: setting and reading of end coordinate, world coordinate, present coordinate, type of end, as well as moving method, and sending and receiving of information on robotic arms.

The communication is temporarily set as from 0x80 to 0x8A.

The roboticMessages space is specially added in ParameterList.h for more communication information. Now only `No Analytical Solution` signal has been added, while more will be added later.

The outline of MOVEL are listed as follows:

First, count the Euclidean Distance between starting point and target point. Second, interpolation points are inserted every 10mm, based on the Euclidean Distance. If interpolation points do not have analytical solution, then search for plus or minus PI/30 from three unchangeable direction for analytical solution. Avoid singular value and some distinctive position that cannot get analytical solution.

Change the interval between MOVEL and JOG into dynamic time. And then, count the time spend moving through the maximum joint. And then, minus the moving time by specific period to take it as interval.
