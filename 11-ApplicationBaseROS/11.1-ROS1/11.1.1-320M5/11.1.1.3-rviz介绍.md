# rviz 简介和使用

rviz 是 ROS 中的三维可视化平台。它一方面可以实现外部信息的图形化显示，另一方面也可以通过 rviz 向对象发布控制信息，实现对机器人的监控。

## 1 安装 rviz 并介绍其界面

安装 ros 时，如果执行的是完全安装，rviz 已经安装，可以尝试直接运行；如果未完全安装，可以单独安装 rviz：

```bash
# Ubuntu16.04
sudo apt-get install ros-kinetic-rviz
```

```bash
# Ubuntu18.04
sudo apt-get install ros-melodic-rviz
```

```bash
# Ubuntu20.04
sudo apt-get install ros-noetic-rviz
```

打开一个新终端（快捷键：<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>T</kbd>）并输入以下命令：

```bash
roscore
```

然后打开一个新的终端（快捷键：<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>T</kbd>），输入以下命令打开 rviz。

```bash
rosrun rviz rviz
# or
rviz
```

打开 rviz，将显示以下界面：

<img src =../../../resources/11-ApplicationBaseROS/rviz-1.png
width ="500"  align = "center">

### 1.1 各个区域介绍

- 左侧有一个显示器列表。显示器是在三维世界中绘图的设备，在显示列表中可能有一些可用选项。
- 顶部是一个工具栏，用户可以使用各种功能按钮选择具有多种功能的工具。
- 中间部分是 3D 视图：这是一个主屏幕，可以在其中查看各种三维数据。三维视图的背景颜色、固定框架、网格等可以在左侧显示的全局选项和网格项目中进行详细设置。
- 下面是时间显示区域，包括系统时间和 ROS 时间。
- 右侧为观察角度设置区，可设置不同的观察角度。

  本部分仅作粗略介绍。如果您想了解更多详情，请访问 [用户指南](http://wiki.ros.org/rviz/UserGuide)。

## 2 前提条件

- 在命令终端中键入 Ctrl+Shift+T，在同一目录下打开另一个终端窗口，查看设备名称：

```bash
# 查看机械臂的设备名称
ls /dev/ttyUSB* # 2020 version myCobot320 M5

# 如果终端没有显示 /dev/ttyUSB 相关名称，则需要使用以下命令
ls /dev/ttyACM* # 2022 version myCobot320 M5
```

- 授予机械臂串行端口权限：

```bash
# 默认设备名称为 /dev/ttyUSB0，如果设备名称不是默认值，则需要修改。
sudo chmod 777 /dev/ttyUSB0 # 2020 version myCobot320 M5

sudo chmod 777 /dev/ttyACM0 # 2022 version myCobot320 M5
```

然后输入用户密码（**注：** 密码不会显示，正确输入即可）。

## 3 Simple use

#### Start using launch file

本示例基于您已经完成的 [环境搭建](./11.1.1.1-环境搭建.md)，并且您已成功地将公司代码从 GitHub 复制到您的虚拟机。

打开新终端（快捷键：<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>T</kbd>

输入命令 **配置 ROS 环境**。

```bash
cd ~/catkin_ws/
source devel/setup.bash
```

再次输入：

```bash
roslaunch new_mycobot_320 mycobot_320_test.launch
```

打开 rviz，就会得到如下结果：

<img src =../../../resources/11-ApplicationBaseROS/12.2.7-4.jpg
width ="500"  align = "center">

如果您想了解有关 rviz 的更多信息，请访问 [官方文件](http://wiki.ros.org/rviz)。

---

[← 上一页](11.1.1.2-ROS基础.md) | [下一页 →](11.1.1.4-基础功能.md)
